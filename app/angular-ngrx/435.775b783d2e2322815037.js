"use strict";(self.webpackChunkangular_ngrx=self.webpackChunkangular_ngrx||[]).push([[435],{6207:(P,g,r)=>{r.r(g),r.d(g,{GalleryModule:()=>S});var s=r(8583),a=r(489),c=r(3153),d=r(5819),u=r(6782),h=r(5257),f=r(9765),o=r(7716);let y=(()=>{class t{constructor(){this.scrollPage=new o.vpe}onScroll(){this.bottomReached()&&!this.loading&&this.scrollPage.emit()}bottomReached(){const e=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),l=Math.max(document.body.scrollTop,document.documentElement.scrollTop),i=Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);return Math.ceil(l+i)>=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=o.lG2({type:t,selectors:[["","appScrollLoadData",""]],hostBindings:function(e,l){1&e&&o.NdJ("scroll",function(){return l.onScroll()},!1,o.Jf7)},inputs:{loading:"loading"},outputs:{scrollPage:"scrollPage"}}),t})(),x=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-loader"]],decls:2,vars:0,consts:[[1,"loader"]],template:function(e,l){1&e&&(o.TgZ(0,"div",0),o._uU(1,"Loading..."),o.qZA())},styles:[".loader[_ngcontent-%COMP%], .loader[_ngcontent-%COMP%]:after{border-radius:50%;width:10em;height:10em}.loader[_ngcontent-%COMP%]{margin:60px auto;font-size:10px;position:relative;text-indent:-9999em;border-top:1.1em solid rgba(255,255,255,.2);border-right:1.1em solid rgba(255,255,255,.2);border-bottom:1.1em solid rgba(255,255,255,.2);border-left:1.1em solid #d30d0d;transform:translateZ(0);animation:load8 1.1s infinite linear}@keyframes load8{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),t})(),_=(()=>{class t{constructor(){this.closeModal=new o.vpe}onClose(){this.closeModal.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-show-image"]],inputs:{url:"url"},outputs:{closeModal:"closeModal"},decls:5,vars:1,consts:[[1,"modal"],[1,"wrap"],["alt","img",1,"image",3,"src"],[1,"close",3,"click"]],template:function(e,l){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o._UZ(2,"img",2),o.TgZ(3,"div",3),o.NdJ("click",function(){return l.onClose()}),o._uU(4,"\u2716"),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(2),o.Q6J("src",l.url,o.LSH))},styles:[".modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;top:0;right:0;bottom:0;left:0;z-index:1000;overflow:hidden;background-color:#000000b3}.image[_ngcontent-%COMP%]{width:400px;height:400px;padding:20px;background:#fff}.close[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:2px;right:4px}.wrap[_ngcontent-%COMP%]{position:relative}"]}),t})();function w(t,n){if(1&t){const e=o.EpF();o.TgZ(0,"div",5),o.TgZ(1,"img",6),o.NdJ("click",function(){const p=o.CHM(e).$implicit;return o.oxw().showPhoto(p)}),o.qZA(),o.qZA()}if(2&t){const e=n.$implicit;o.xp6(1),o.Q6J("src",e.thumbnailUrl,o.LSH)}}function C(t,n){1&t&&(o.ynx(0),o._UZ(1,"div"),o._UZ(2,"app-loader"),o._UZ(3,"div"),o.BQk())}function v(t,n){if(1&t){const e=o.EpF();o.TgZ(0,"button",7),o.NdJ("click",function(){return o.CHM(e),o.oxw().onScrollTop()}),o._uU(1,"\u27a4"),o.qZA()}}function M(t,n){if(1&t){const e=o.EpF();o.TgZ(0,"app-show-image",8),o.NdJ("closeModal",function(){return o.CHM(e),o.oxw().onCloseModal()}),o.qZA()}if(2&t){const e=o.oxw();o.Q6J("url",e.url)}}let b=(()=>{class t{constructor(e){this._store=e,this.showImgModal=!1,this.isFetching=!1,this.url="",this.showUpBtn=!1,this.destroy$=new f.xQ,this.photos$=this._store.pipe((0,a.Ys)(d.tT)),this.page$=this._store.pipe((0,a.Ys)(d.DB)),this.loading$=this._store.pipe((0,a.Ys)(d.zd))}ngOnInit(){this._store.dispatch(new c.ZJ),this.loading$.pipe((0,u.R)(this.destroy$)).subscribe(e=>this.isFetching=e)}getPage(){let e=0;return this.page$.pipe((0,h.q)(1)).subscribe(l=>e=l),e}downloadPhoto(){this.isFetching||(this.showUpBtn=!0,this._store.dispatch(new c.a6(this.getPage()+1)),this._store.dispatch(new c.ZJ))}showPhoto(e){this.showImgModal=!0,this.url=e.url,document.body.style.overflow="hidden"}onCloseModal(){this.showImgModal=!1,this.url="",document.body.style.overflow="auto"}onScrollData(e){this.downloadPhoto()}onScrollTop(){this.showUpBtn=!1,window.scroll({top:0,left:0,behavior:"smooth"})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(a.yh))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-gallery"]],decls:7,vars:9,consts:[["appScrollLoadData","",1,"grid",3,"loading","scrollPage"],["class","gallery",4,"ngFor","ngForOf"],[4,"ngIf"],["class","up",3,"click",4,"ngIf"],[3,"url","closeModal",4,"ngIf"],[1,"gallery"],["alt","ss",1,"image",3,"src","click"],[1,"up",3,"click"],[3,"url","closeModal"]],template:function(e,l){1&e&&(o.TgZ(0,"div",0),o.NdJ("scrollPage",function(p){return l.onScrollData(p)}),o.YNc(1,w,2,1,"div",1),o.ALo(2,"async"),o.YNc(3,C,4,0,"ng-container",2),o.ALo(4,"async"),o.qZA(),o.YNc(5,v,2,0,"button",3),o.YNc(6,M,1,1,"app-show-image",4)),2&e&&(o.Q6J("loading",l.isFetching),o.xp6(1),o.Q6J("ngForOf",o.lcZ(2,5,l.photos$)),o.xp6(2),o.Q6J("ngIf",o.lcZ(4,7,l.loading$)),o.xp6(2),o.Q6J("ngIf",l.showUpBtn),o.xp6(1),o.Q6J("ngIf",l.showImgModal))},directives:[y,s.sg,s.O5,x,_],pipes:[s.Ov],styles:[".image[_ngcontent-%COMP%]{width:150px}.gallery[_ngcontent-%COMP%]{display:inline-block;margin:10px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:300px auto 300px;justify-items:center;grid-column-gap:50px;column-gap:50px;grid-row-gap:50px;row-gap:50px;background-color:#37383a;padding:40px 50px}.up[_ngcontent-%COMP%]{position:fixed;top:80px;right:30px;width:45px;height:45px;border-radius:50%;transform:rotate(-90deg);font-size:20px;color:#363434;border:1px solid black}"]}),t})(),T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[s.ez]]}),t})();var m=r(5043);const Z=[{path:"",component:b}];let S=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[s.ez,T,m.Bz.forChild(Z)],m.Bz]}),t})()}}]);